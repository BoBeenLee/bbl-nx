<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/7fc6f9585b0bc593.css" data-precedence="next.js"/><link rel="stylesheet" href="/_next/static/css/be7ec14a9e7399cd.css" data-precedence="next.js"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-TZZNKPFDD5"/><title>BoBeen Lee</title><meta name="description" content="Front-end developer, TypeScript enthusiast"/><meta name="keywords" content="BoBeen Lee, React, React Native, Typescript, Javascript"/><meta name="theme-color" content="#111827"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="robots" content="follow, index"/><link rel="canonical" href="https://bbl-nx.vercel.app/"/><meta property="og:title" content="BoBeen Lee"/><meta property="og:description" content="Front-end developer, TypeScript enthusiast"/><meta property="og:url" content="https://bbl-nx.vercel.app/"/><meta property="og:site_name" content="BoBeen Lee"/><meta property="og:image" content="https://bbl-nx.vercel.app/assets/quokka.webp"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@BoBeenLee"/><meta name="twitter:creator" content="@BoBeenLee"/><meta name="twitter:title" content="BoBeen Lee"/><meta name="twitter:description" content="Front-end developer, TypeScript enthusiast"/><meta name="twitter:image" content="https://bbl-nx.vercel.app/assets/quokka.webp"/><link rel="icon" href="/favicons/favicon.ico"/><link rel="icon" href="/favicons/apple-icon-180x180.png" sizes="180x180"/><link rel="icon" href="/favicons/favicon-32x32.png" type="image/png" sizes="32x32"/><link rel="icon" href="/favicons/favicon-16x16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/favicons/manifest.json"/><link rel="icon" href="/static/favicons/favicon.svg"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" nomodule=""></script></head><body class="text-white bg-white dark:bg-gray-900 dark:text-black"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="flex flex-col flex-1 bg-white dark:bg-gray-900"><header class="flex flex-col justify-center px-8"><nav class="relative flex items-center justify-between w-full max-w-2xl pt-8 pb-8 mx-auto text-gray-900 bg-white border-gray-200 dark:border-gray-700 sm:pb-16 dark:bg-gray-900 bg-opacity-60 dark:text-gray-100"><div class="ml-[-0.60rem]"><button class="menu-button_burger__dmad_ visible md:hidden absolute top-[1.8rem] flex w-[2.5rem] h-[2.5rem]" aria-label="Toggle menu" type="button"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="absolute w-10 h-10 px-2 py-1 dark:fill-white fill-black w-full h-full" data-hide="false" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="absolute w-10 h-10 px-2 py-1 ml-[-0.30rem] dark:fill-white fill-black w-full h-full" data-hide="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button><ul class="mobile-menus_menu__LGHW_ flex flex-col absolute bg-white dark:bg-gray-900 left-0 visible md:hidden"><li class="text-sm font-semibold text-gray-900 border-b border-gray-300 dark:border-gray-700 dark:text-gray-100" style="transition-delay:150ms"><a class="flex w-auto py-4" href="/">Home</a></li><li class="text-sm font-semibold text-gray-900 border-b border-gray-300 dark:border-gray-700 dark:text-gray-100" style="transition-delay:175ms"><a class="flex w-auto py-4" href="/about">About</a></li><li class="text-sm font-semibold text-gray-900 border-b border-gray-300 dark:border-gray-700 dark:text-gray-100" style="transition-delay:200ms"><a class="flex w-auto py-4" href="/project">Project</a></li><li class="text-sm font-semibold text-gray-900 border-b border-gray-300 dark:border-gray-700 dark:text-gray-100" style="transition-delay:225ms"><a class="flex w-auto py-4" href="/blog">Blog</a></li></ul><div class="hidden md:inline-block"><a class="p-1 sm:px-3 sm:py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-all font-normal text-gray-600 dark:text-gray-400" href="/"><span class="capsize">Home</span></a><a class="p-1 sm:px-3 sm:py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-all font-normal text-gray-600 dark:text-gray-400" href="/about"><span class="capsize">About</span></a><a class="p-1 sm:px-3 sm:py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-all font-normal text-gray-600 dark:text-gray-400" href="/project"><span class="capsize">Project</span></a><a class="p-1 sm:px-3 sm:py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-all font-normal text-gray-600 dark:text-gray-400" href="/blog"><span class="capsize">Blog</span></a></div></div></nav></header><main class="flex flex-col justify-center flex-1 px-8 bg-white dark:bg-gray-900"><div class="flex flex-col items-start flex-1 w-full max-w-2xl mx-auto mb-8 border-gray-200 sm:mb-12 dark:border-gray-700"><a class="pb-2 font-bold text-3xl tracking-tigh text-black dark:text-white">React prod, staging, dev 환경 설정하기</a><div class="flex flex-row items-center justify-between w-full mt-2"><div class="flex flex-row items-center"><div class="w-6 h-6 relative rounded-full overflow-hidden"><img alt="avatar" decoding="async" data-nimg="fill" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" sizes="100vw" srcSet="/_next/image?url=%2Fassets%2Fquokka.png&amp;w=640&amp;q=75 640w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=750&amp;q=75 750w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=828&amp;q=75 828w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2Fassets%2Fquokka.png&amp;w=3840&amp;q=75"/></div><p class="ml-2 text-sm text-gray-600 dark:text-gray-400">BoBeen Lee</p></div><p class="text-sm text-gray-600 dark:text-gray-400">July 8, 2018</p></div><article class="w-full mt-4 prose dark:prose-dark max-w-none"><p>React prod, staging, dev 환경 설정하기</p>
<p><a href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#adding-custom-environment-variables">crn</a>, <a href="https://movie.naver.com/movie/bi/mi/basic.nhn?code=115622">crna</a>에서 외부 환경 설정을 추가하는 방법에 대해 다룬다.
prod, dev환경 별 환경변수를 받으러면
crn같은 경우 기본적으로 <a href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#what-other-env-files-can-be-used">.env.local, .env.development, .env.production, .env.test</a>을 제공해주는거 같고
crna는 각 환경에 따른 환경 설정을 하려면 <a href="https://github.com/luggit/react-native-config">react native config</a>나 <a href="https://github.com/zetachang/react-native-dotenv">react native dotenv</a>(.env만 사용가능함)를 이용할 수 있겠다.</p>
<p>만일 staging 환경을 추가하고 싶다라는 고민에서 기본적으로 제공하는 문서로는 다루기가 힘든다라는 것을 알고 다른 방안을 찾아보게 되었다.</p>
<ul>
<li>React App</li>
</ul>
<p><a href="https://github.com/BoBeenLee/environment-config-example/blob/react/package.json">package.json</a></p>
<pre><code>...
 "scripts": {
    "start": "cp ./.env.dev ./.env &#x26;&#x26; react-scripts start",
    "start:staging": "cp ./.env.staging ./.env &#x26;&#x26; react-scripts start",
    "start:production": "cp ./.env.prod ./.env &#x26;&#x26; react-scripts start",
  }
...
</code></pre>
<p>스크립트 단에서 실행방법을 나누고 cp로 .env에 복사 후 각 환경별로 환경변수를 받고 실행하는 방법이다. 
내가 발견한 것들 중에 가장 깔끔한? 방법인거 같고 코드에 영향도도 가장 적고 관리하는데 가장 좋은 방법이라 생각한다.</p>
<ul>
<li>React Native App</li>
</ul>
<p><a href="https://github.com/BoBeenLee/environment-config-example/blob/react-native/package.json">package.json</a></p>
<pre><code>...
"scripts": {
    "start": "./scripts/pre-build.sh development &#x26;&#x26; react-native-scripts start",
    "start:staging": "./scripts/pre-build.sh staging &#x26;&#x26; react-native-scripts start",
    "start:production": "./scripts/pre-build.sh production &#x26;&#x26; react-native-scripts start",
  },
...
</code></pre>
<p>react native는 쉘 스크립트를 이용한 관리 방법이다.
<a href="https://github.com/BoBeenLee/environment-config-example/blob/react-native/scripts/pre-build.sh">pre-build.sh</a>는 환경별로 REACT_NATIVE_ENV키 값을 생성하여 <a href="https://github.com/BoBeenLee/environment-config-example/blob/react-native/config.json">config.json</a>에 덮어씌운다.
그리고 <a href="https://github.com/BoBeenLee/environment-config-example/blob/react-native/environment.js">environment.js</a>을 만들어 환경별 필요한 변수들을 세팅하여 전달한다.</p>
<h3>dotenv나 config라이브러리를 사용하지 않았던 이유</h3>
<ul>
<li>react native config
물론 getting started 보고 설정하면 원활히 동작할 수 있겠지만 관리 측면에서 react native config 호환도 유지해야한다는 점에 오히려 불편하다는 걸 알게되었다. 그런 이유로 사용하지 않았던거같다.</li>
<li>dotenv
crn은 내부적으로 설정 되어있지만 한정적인 설정밖에 안되어 이용하기 불편했던거같다. (ex) .env.staging 설정) 
react native dotenv는 <a href="https://github.com/zetachang/react-native-dotenv">.env만 사용가능</a>하여 제외 대상이었다.
물론 아래와 같은 식으로 환경변수를 .env에 전달 받는 방법도 있겠다.
.env</li>
</ul>
<pre><code>REACT_ENV=$REACT_ENV
</code></pre>
<p>package.json</p>
<pre><code>"scripts": {
	"start": "REACT_ENV=staging &#x26;&#x26; react-scripts start"
}
</code></pre>
<p>다만 react native에는 OS 환경에 환경변수 설정 후 appcenter환경에서 빌드 시엔 정상적으로 인식을 못했던거같다. ( react-native-dotenv의 이슈인지 정확히 모르겠지만 )</p>
<p>환경별 환경변수 설정은 다양한 방법이 존재하겠지만 아직까진 위와 같은 방법이 가장 심플한 경험을 받았다.
각 환경별 환경변수 설정 Example을 공유한다.</p>
<p>React</p>
<ul>
<li><a href="https://github.com/BoBeenLee/environment-config-example/tree/react">https://github.com/BoBeenLee/environment-config-example/tree/react</a></li>
</ul>
<p>React Native</p>
<ul>
<li><a href="https://github.com/BoBeenLee/environment-config-example/tree/react-native">https://github.com/BoBeenLee/environment-config-example/tree/react-native</a></li>
</ul>
<p>Node</p>
<ul>
<li><a href="https://github.com/BoBeenLee/environment-config-example/tree/node">https://github.com/BoBeenLee/environment-config-example/tree/node</a></li>
</ul>
</article></div></main><footer class="flex flex-col px-8"><div class="flex flex-col items-start justify-center w-full max-w-2xl mx-auto mb-8"><div class="mb-8 w-full h-[1px] bg-gray-200 dark:bg-gray-800"></div><div class="grid w-full max-w-2xl grid-cols-2 gap-4 pb-16"><div class="flex flex-col items-start space-y-4"><a class="text-gray-500 transition hover:text-gray-600" href="/">Home</a><a class="text-gray-500 transition hover:text-gray-600" href="/about">About</a><a class="text-gray-500 transition hover:text-gray-600" href="/project">Project</a><a class="text-gray-500 transition hover:text-gray-600" href="/blog">Blog</a></div><div class="flex flex-col space-y-4"><a rel="noreferrer" href="https://github.com/BoBeenLee" target="_blank" class="text-gray-500 transition hover:text-gray-600">Github</a><a rel="noreferrer" href="mailto:globaldev@naver.com" target="_blank" class="text-gray-500 transition hover:text-gray-600">Email</a></div></div></div></footer></div><script src="/_next/static/chunks/webpack-43cb8370814af9a9.js" async=""></script><script src="/_next/static/chunks/8866857e-0348eef442260c24.js" async=""></script><script src="/_next/static/chunks/14-47fa5bfc81e5275e.js" async=""></script><script src="/_next/static/chunks/main-app-75fa36f85e585320.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:I{\"id\":\"9129\",\"chunks\":[\"272:webpack-43cb8370814af9a9\",\"680:8866857e-0348eef442260c24\",\"14:14-47fa5bfc81e5275e\"],\"name\":\"\",\"async\":false}\n4:I{\"id\":\"149\",\"chunks\":[\"272:webpack-43cb8370814af9a9\",\"680:8866857e-0348eef442260c24\",\"14:14-47fa5bfc81e5275e\"],\"name\":\"\",\"async\":false}\n5:I{\"id\":\"4503\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"185:app/layout-9383bb0c60f86351\"],\"name\":\"ThemeProvider\",\"async\":false}\n6:I{\"id\":\"6864\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"185:app/layout-9383bb0c60f86351\"],\"name\":\"\",\"async\":f"])</script><script>self.__next_f.push([1,"alse}\n7:I{\"id\":\"935\",\"chunks\":[\"272:webpack-43cb8370814af9a9\",\"680:8866857e-0348eef442260c24\",\"14:14-47fa5bfc81e5275e\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":\"1227\",\"chunks\":[\"272:webpack-43cb8370814af9a9\",\"680:8866857e-0348eef442260c24\",\"14:14-47fa5bfc81e5275e\"],\"name\":\"\",\"async\":false}\n9:I{\"id\":\"5730\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"964:964-fb81438760ba2bf7\",\"880:app/project/page-7f19be5b34bbfb13\"],\"name\":\"\",\"async\":false}\nb:I{\"id\":\"4743\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"185:app/layout-9383bb0c60f8"])</script><script>self.__next_f.push([1,"6351\"],\"name\":\"\",\"async\":false}\nc:I{\"id\":\"9505\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"185:app/layout-9383bb0c60f86351\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"1:[\"$\",\"$L2\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/react-prod-staging-dev-env-setting\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"id\",\"react-prod-staging-dev-env-setting\",\"d\"],{\"children\":[\"\",{}]}]}]},null,null,true],\"initialHead\":[\"$L3\",null],\"globalErrorComponent\":\"$4\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[null,[\"$\",\"body\",null,{\"className\":\"text-white bg-white dark:bg-gray-900 dark:text-black\",\"children\":[[\"$\",\"$L5\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col flex-1 bg-white dark:bg-gray-900\",\"children\":[[\"$\",\"$L6\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex flex-col justify-center flex-1 px-8 bg-white dark:bg-gray-900\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center w-full max-w-2xl py-12 mx-auto sm:py-20 sm:mb-16\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"font-bold text-3xl md:text-5xl tracking-tight mb-4 text-black dark:text-white\",\"children\":\"Something went Wrong.\"}],[\"$\",\"div\",null,{\"className\":\"mb-8 text-gray-600 dark:text-gray-400\",\"children\":\"I'm guessing you spelled something wrong. Can you double check\\n      that URL?\"}],[\"$\",\"$L9\",null,{\"className\":\"w-64 p-1 mx-auto font-bold text-center text-black bg-gray-200 rounded-md sm:p-4 dark:bg-gray-800 dark:text-white\",\"href\":\"/\",\"children\":\"Home\"}]]}],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"childProp\":{\"current\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"id\",\"react-prod-staging-dev-env-setting\",\"d\"],\"children\"],\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"childProp\":{\"current\":[\"$La\",null,null,[]],\"segment\":\"\"}}],\"segment\":[\"id\",\"react-prod-staging-dev-env-setting\",\"d\"]}}],\"segment\":\"blog\"}}]}],[\"$\",\"$Lb\",null,{}]]}]}],[\"$\",\"$Lc\",null,{\"async\":true,\"strategy\":\"afterInteractive\",\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-TZZNKPFDD5\"}],[\"$\",\"$Lc\",null,{\"id\":\"gtag\",\"async\":true,\"strategy\":\"afterInteractive\",\"dangerouslySetInnerHTML\":{\"__html\":\"\\nwindow.dataLayer = window.dataLayer || [];\\nfunction gtag(){dataLayer.push(arguments);}\\ngtag('js', new Date());\\n\\ngtag('config', 'G-TZZNKPFDD5');\\n      \"}}]]}]]}],null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/7fc6f9585b0bc593.css\",\"precedence\":\"next.js\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/be7ec14a9e7399cd.css\",\"precedence\":\"next.js\"}]]]}]\n"])</script><script>self.__next_f.push([1,"d:I{\"id\":\"7964\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"964:964-fb81438760ba2bf7\",\"880:app/project/page-7f19be5b34bbfb13\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start flex-1 w-full max-w-2xl mx-auto mb-8 border-gray-200 sm:mb-12 dark:border-gray-700\",\"children\":[[\"$\",\"a\",null,{\"className\":\"pb-2 font-bold text-3xl tracking-tigh text-black dark:text-white\",\"children\":\"React prod, staging, dev 환경 설정하기\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-row items-center justify-between w-full mt-2\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-row items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"w-6 h-6 relative rounded-full overflow-hidden\",\"children\":[\"$\",\"$Ld\",null,{\"alt\":\"avatar\",\"fill\":true,\"src\":\"/assets/quokka.png\",\"priority\":true}]}],[\"$\",\"p\",null,{\"className\":\"ml-2 text-sm text-gray-600 dark:text-gray-400\",\"children\":\"BoBeen Lee\"}]]}],[\"$\",\"p\",null,{\"className\":\"text-sm text-gray-600 dark:text-gray-400\",\"children\":\"July 8, 2018\"}]]}],[\"$\",\"article\",null,{\"className\":\"w-full mt-4 prose dark:prose-dark max-w-none\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003eReact prod, staging, dev 환경 설정하기\u003c/p\u003e\\n\u003cp\u003e\u003ca href=\\\"https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#adding-custom-environment-variables\\\"\u003ecrn\u003c/a\u003e, \u003ca href=\\\"https://movie.naver.com/movie/bi/mi/basic.nhn?code=115622\\\"\u003ecrna\u003c/a\u003e에서 외부 환경 설정을 추가하는 방법에 대해 다룬다.\\nprod, dev환경 별 환경변수를 받으러면\\ncrn같은 경우 기본적으로 \u003ca href=\\\"https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#what-other-env-files-can-be-used\\\"\u003e.env.local, .env.development, .env.production, .env.test\u003c/a\u003e을 제공해주는거 같고\\ncrna는 각 환경에 따른 환경 설정을 하려면 \u003ca href=\\\"https://github.com/luggit/react-native-config\\\"\u003ereact native config\u003c/a\u003e나 \u003ca href=\\\"https://github.com/zetachang/react-native-dotenv\\\"\u003ereact native dotenv\u003c/a\u003e(.env만 사용가능함)를 이용할 수 있겠다.\u003c/p\u003e\\n\u003cp\u003e만일 staging 환경을 추가하고 싶다라는 고민에서 기본적으로 제공하는 문서로는 다루기가 힘든다라는 것을 알고 다른 방안을 찾아보게 되었다.\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003eReact App\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cp\u003e\u003ca href=\\\"https://github.com/BoBeenLee/environment-config-example/blob/react/package.json\\\"\u003epackage.json\u003c/a\u003e\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003e...\\n \\\"scripts\\\": {\\n    \\\"start\\\": \\\"cp ./.env.dev ./.env \u0026#x26;\u0026#x26; react-scripts start\\\",\\n    \\\"start:staging\\\": \\\"cp ./.env.staging ./.env \u0026#x26;\u0026#x26; react-scripts start\\\",\\n    \\\"start:production\\\": \\\"cp ./.env.prod ./.env \u0026#x26;\u0026#x26; react-scripts start\\\",\\n  }\\n...\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e스크립트 단에서 실행방법을 나누고 cp로 .env에 복사 후 각 환경별로 환경변수를 받고 실행하는 방법이다. \\n내가 발견한 것들 중에 가장 깔끔한? 방법인거 같고 코드에 영향도도 가장 적고 관리하는데 가장 좋은 방법이라 생각한다.\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003eReact Native App\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cp\u003e\u003ca href=\\\"https://github.com/BoBeenLee/environment-config-example/blob/react-native/package.json\\\"\u003epackage.json\u003c/a\u003e\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003e...\\n\\\"scripts\\\": {\\n    \\\"start\\\": \\\"./scripts/pre-build.sh development \u0026#x26;\u0026#x26; react-native-scripts start\\\",\\n    \\\"start:staging\\\": \\\"./scripts/pre-build.sh staging \u0026#x26;\u0026#x26; react-native-scripts start\\\",\\n    \\\"start:production\\\": \\\"./scripts/pre-build.sh production \u0026#x26;\u0026#x26; react-native-scripts start\\\",\\n  },\\n...\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003ereact native는 쉘 스크립트를 이용한 관리 방법이다.\\n\u003ca href=\\\"https://github.com/BoBeenLee/environment-config-example/blob/react-native/scripts/pre-build.sh\\\"\u003epre-build.sh\u003c/a\u003e는 환경별로 REACT_NATIVE_ENV키 값을 생성하여 \u003ca href=\\\"https://github.com/BoBeenLee/environment-config-example/blob/react-native/config.json\\\"\u003econfig.json\u003c/a\u003e에 덮어씌운다.\\n그리고 \u003ca href=\\\"https://github.com/BoBeenLee/environment-config-example/blob/react-native/environment.js\\\"\u003eenvironment.js\u003c/a\u003e을 만들어 환경별 필요한 변수들을 세팅하여 전달한다.\u003c/p\u003e\\n\u003ch3\u003edotenv나 config라이브러리를 사용하지 않았던 이유\u003c/h3\u003e\\n\u003cul\u003e\\n\u003cli\u003ereact native config\\n물론 getting started 보고 설정하면 원활히 동작할 수 있겠지만 관리 측면에서 react native config 호환도 유지해야한다는 점에 오히려 불편하다는 걸 알게되었다. 그런 이유로 사용하지 않았던거같다.\u003c/li\u003e\\n\u003cli\u003edotenv\\ncrn은 내부적으로 설정 되어있지만 한정적인 설정밖에 안되어 이용하기 불편했던거같다. (ex) .env.staging 설정) \\nreact native dotenv는 \u003ca href=\\\"https://github.com/zetachang/react-native-dotenv\\\"\u003e.env만 사용가능\u003c/a\u003e하여 제외 대상이었다.\\n물론 아래와 같은 식으로 환경변수를 .env에 전달 받는 방법도 있겠다.\\n.env\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode\u003eREACT_ENV=$REACT_ENV\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003epackage.json\u003c/p\u003e\\n\u003cpre\u003e\u003ccode\u003e\\\"scripts\\\": {\\n\\t\\\"start\\\": \\\"REACT_ENV=staging \u0026#x26;\u0026#x26; react-scripts start\\\"\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e다만 react native에는 OS 환경에 환경변수 설정 후 appcenter환경에서 빌드 시엔 정상적으로 인식을 못했던거같다. ( react-native-dotenv의 이슈인지 정확히 모르겠지만 )\u003c/p\u003e\\n\u003cp\u003e환경별 환경변수 설정은 다양한 방법이 존재하겠지만 아직까진 위와 같은 방법이 가장 심플한 경험을 받았다.\\n각 환경별 환경변수 설정 Example을 공유한다.\u003c/p\u003e\\n\u003cp\u003eReact\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003e\u003ca href=\\\"https://github.com/BoBeenLee/environment-config-example/tree/react\\\"\u003ehttps://github.com/BoBeenLee/environment-config-example/tree/react\u003c/a\u003e\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cp\u003eReact Native\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003e\u003ca href=\\\"https://github.com/BoBeenLee/environment-config-example/tree/react-native\\\"\u003ehttps://github.com/BoBeenLee/environment-config-example/tree/react-native\u003c/a\u003e\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cp\u003eNode\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003e\u003ca href=\\\"https://github.com/BoBeenLee/environment-config-example/tree/node\\\"\u003ehttps://github.com/BoBeenLee/environment-config-example/tree/node\u003c/a\u003e\u003c/li\u003e\\n\u003c/ul\u003e\\n\"}}]]}]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"BoBeen Lee\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"Front-end developer, TypeScript enthusiast\"}],null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"keywords\",\"content\":\"BoBeen Lee, React, React Native, Typescript, Javascript\"}],null,[[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#111827\"}]],null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1, shrink-to-fit=no\"}],null,null,[\"$\",\"meta\",null,{\"name\":\"robots\",\"content\":\"follow, index\"}],null,null,null,null,null,null,null,[]],[[\"$\",\"link\",null,{\"rel\":\"canonical\",\"href\":\"https://bbl-nx.vercel.app/\"}],null,null,null],null,null,[null,null,null,null,null],null,[null,[\"$\",\"meta\",null,{\"property\":\"og:title\",\"content\":\"BoBeen Lee\"}],[\"$\",\"meta\",null,{\"property\":\"og:description\",\"content\":\"Front-end developer, TypeScript enthusiast\"}],[\"$\",\"meta\",null,{\"property\":\"og:url\",\"content\":\"https://bbl-nx.vercel.app/\"}],[\"$\",\"meta\",null,{\"property\":\"og:site_name\",\"content\":\"BoBeen Lee\"}],null,null,null,[[[\"$\",\"meta\",null,{\"property\":\"og:image\",\"content\":\"https://bbl-nx.vercel.app/assets/quokka.webp\"}]]],null,null,null,null,null,null,[\"$\",\"meta\",null,{\"property\":\"og:type\",\"content\":\"website\"}]],[[\"$\",\"meta\",null,{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:site\",\"content\":\"@BoBeenLee\"}],null,[\"$\",\"meta\",null,{\"name\":\"twitter:creator\",\"content\":\"@BoBeenLee\"}],null,[\"$\",\"meta\",null,{\"name\":\"twitter:title\",\"content\":\"BoBeen Lee\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:description\",\"content\":\"Front-end developer, TypeScript enthusiast\"}],[[[\"$\",\"meta\",null,{\"name\":\"twitter:image\",\"content\":\"https://bbl-nx.vercel.app/assets/quokka.webp\"}],null]],null,null],null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/favicon.ico\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/apple-icon-180x180.png\",\"sizes\":\"180x180\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/favicon-32x32.png\",\"type\":\"image/png\",\"sizes\":\"32x32\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/favicon-16x16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/manifest.json\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/static/favicons/favicon.svg\"}]],[],null]]\n"])</script>