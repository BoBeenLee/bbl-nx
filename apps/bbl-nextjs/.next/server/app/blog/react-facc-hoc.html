<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/7fc6f9585b0bc593.css" data-precedence="next.js"/><link rel="stylesheet" href="/_next/static/css/be7ec14a9e7399cd.css" data-precedence="next.js"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-TZZNKPFDD5"/><title>BoBeen Lee</title><meta name="description" content="Front-end developer, TypeScript enthusiast"/><meta name="keywords" content="BoBeen Lee, React, React Native, Typescript, Javascript"/><meta name="theme-color" content="#111827"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="robots" content="follow, index"/><link rel="canonical" href="https://bbl-nx.vercel.app/"/><meta property="og:title" content="BoBeen Lee"/><meta property="og:description" content="Front-end developer, TypeScript enthusiast"/><meta property="og:url" content="https://bbl-nx.vercel.app/"/><meta property="og:site_name" content="BoBeen Lee"/><meta property="og:image" content="https://bbl-nx.vercel.app/assets/quokka.webp"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@BoBeenLee"/><meta name="twitter:creator" content="@BoBeenLee"/><meta name="twitter:title" content="BoBeen Lee"/><meta name="twitter:description" content="Front-end developer, TypeScript enthusiast"/><meta name="twitter:image" content="https://bbl-nx.vercel.app/assets/quokka.webp"/><link rel="icon" href="/favicons/favicon.ico"/><link rel="icon" href="/favicons/apple-icon-180x180.png" sizes="180x180"/><link rel="icon" href="/favicons/favicon-32x32.png" type="image/png" sizes="32x32"/><link rel="icon" href="/favicons/favicon-16x16.png" type="image/png" sizes="16x16"/><link rel="icon" href="/favicons/manifest.json"/><link rel="icon" href="/static/favicons/favicon.svg"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" nomodule=""></script></head><body class="text-white bg-white dark:bg-gray-900 dark:text-black"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="flex flex-col flex-1 bg-white dark:bg-gray-900"><header class="flex flex-col justify-center px-8"><nav class="relative flex items-center justify-between w-full max-w-2xl pt-8 pb-8 mx-auto text-gray-900 bg-white border-gray-200 dark:border-gray-700 sm:pb-16 dark:bg-gray-900 bg-opacity-60 dark:text-gray-100"><div class="ml-[-0.60rem]"><button class="menu-button_burger__dmad_ visible md:hidden absolute top-[1.8rem] flex w-[2.5rem] h-[2.5rem]" aria-label="Toggle menu" type="button"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="absolute w-10 h-10 px-2 py-1 dark:fill-white fill-black w-full h-full" data-hide="false" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="absolute w-10 h-10 px-2 py-1 ml-[-0.30rem] dark:fill-white fill-black w-full h-full" data-hide="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></button><ul class="mobile-menus_menu__LGHW_ flex flex-col absolute bg-white dark:bg-gray-900 left-0 visible md:hidden"><li class="text-sm font-semibold text-gray-900 border-b border-gray-300 dark:border-gray-700 dark:text-gray-100" style="transition-delay:150ms"><a class="flex w-auto py-4" href="/">Home</a></li><li class="text-sm font-semibold text-gray-900 border-b border-gray-300 dark:border-gray-700 dark:text-gray-100" style="transition-delay:175ms"><a class="flex w-auto py-4" href="/about">About</a></li><li class="text-sm font-semibold text-gray-900 border-b border-gray-300 dark:border-gray-700 dark:text-gray-100" style="transition-delay:200ms"><a class="flex w-auto py-4" href="/project">Project</a></li><li class="text-sm font-semibold text-gray-900 border-b border-gray-300 dark:border-gray-700 dark:text-gray-100" style="transition-delay:225ms"><a class="flex w-auto py-4" href="/blog">Blog</a></li></ul><div class="hidden md:inline-block"><a class="p-1 sm:px-3 sm:py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-all font-normal text-gray-600 dark:text-gray-400" href="/"><span class="capsize">Home</span></a><a class="p-1 sm:px-3 sm:py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-all font-normal text-gray-600 dark:text-gray-400" href="/about"><span class="capsize">About</span></a><a class="p-1 sm:px-3 sm:py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-all font-normal text-gray-600 dark:text-gray-400" href="/project"><span class="capsize">Project</span></a><a class="p-1 sm:px-3 sm:py-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-800 transition-all font-normal text-gray-600 dark:text-gray-400" href="/blog"><span class="capsize">Blog</span></a></div></div></nav></header><main class="flex flex-col justify-center flex-1 px-8 bg-white dark:bg-gray-900"><div class="flex flex-col items-start flex-1 w-full max-w-2xl mx-auto mb-8 border-gray-200 sm:mb-12 dark:border-gray-700"><a class="pb-2 font-bold text-3xl tracking-tigh text-black dark:text-white">Function as Child Component And High Order Component</a><div class="flex flex-row items-center justify-between w-full mt-2"><div class="flex flex-row items-center"><div class="w-6 h-6 relative rounded-full overflow-hidden"><img alt="avatar" decoding="async" data-nimg="fill" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" sizes="100vw" srcSet="/_next/image?url=%2Fassets%2Fquokka.png&amp;w=640&amp;q=75 640w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=750&amp;q=75 750w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=828&amp;q=75 828w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=1080&amp;q=75 1080w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=1200&amp;q=75 1200w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=1920&amp;q=75 1920w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=2048&amp;q=75 2048w, /_next/image?url=%2Fassets%2Fquokka.png&amp;w=3840&amp;q=75 3840w" src="/_next/image?url=%2Fassets%2Fquokka.png&amp;w=3840&amp;q=75"/></div><p class="ml-2 text-sm text-gray-600 dark:text-gray-400">BoBeen Lee</p></div><p class="text-sm text-gray-600 dark:text-gray-400">March 8, 2018</p></div><article class="w-full mt-4 prose dark:prose-dark max-w-none"><p>HOC는 많은 사람들이 이미 알고 있고 자주 사용하기에 따로 설명은 하지 않겠다. 
<a href="https://reactjs.org/docs/higher-order-components.html">공식문서</a>에도 자세히 설명 되어있다. 
주로 보통 HOC는 공통 기능, 횡단 관심사 분리 위해서 사용해왔었다. 
ex) loading, auth, logging, tracking 등등...</p>
<p><a href="https://reactjs.org/docs/render-props.html">Render Props</a>의 예시를 참조하여 구현해보자.</p>
<h2>High Order Component</h2>
<pre><code>function withMouse(Component) {
  return class extends React.Component {
    constructor(props) {
      super(props);
      this.handleMouseMove = this.handleMouseMove.bind(this);
      this.state = { x: 0, y: 0 };
    }

    handleMouseMove(event) {
      this.setState({
        x: event.clientX,
        y: event.clientY,
      });
    }

    render() {
      return (
        &#x3C;div style={{ height: '100%' }} onMouseMove={this.handleMouseMove}>
          &#x3C;Component {...this.props} mouse={this.state} />
        &#x3C;/div>
      );
    }
  };
}
</code></pre>
<p>만일 <a href="https://github.com/mridgway/hoist-non-react-statics">Static Methods</a>를 카피하기 위해선 별도의 로직도 필요할 것이다.</p>
<h3>Problem</h3>
<ol>
<li>Duplication Props 
Mouse, Touch기능을 같이 사용하고 싶다면
<pre><code>withMouse(withTouch(class extends React.Component { ... }));
or
@mouse
@touch
class Component extends React.Component { ... }
</code></pre>
로 구현할텐데
만일 withTouch와 withMouse 둘다 동일한 mouse props를 넘겨줄 경우, withMouse의 mouse props는 원하는 데로 동작을 안할 것이다.</li>
<li>여러개의 HOC를 사용할 경우 props의 복잡도 증가
<pre><code>compose(withMouse, withTouch, withUser, withAuth, withLoading)(...)
or
@mouse
@touch
@user
@auth
@loading
...
</code></pre>
여러개의 HOC를 사용할 경우, 어떤 props가 어떤 HOC에서 넘어왔는지 명시적이지 않아 직접 구현체 HOC props를 확인해야하는 경우가 생기게 된다.</li>
</ol>
<h3>Solution</h3>
<p>Function as Child Component으로 1, 2의 이슈를 해결할 수 있다.</p>
<h2>Function as Child Component</h2>
<pre><code>class Mouse extends React.Component {
  constructor(props) {
    super(props);
    this.handleMouseMove = this.handleMouseMove.bind(this);
    this.state = { x: 0, y: 0 };
  }

  handleMouseMove(event) {
    this.setState({
      x: event.clientX,
      y: event.clientY,
    });
  }

  render() {
    return (
      &#x3C;div style={{ height: '100%' }} onMouseMove={this.handleMouseMove}>
        {this.props.children(this.state)}
      &#x3C;/div>
    );
  }
}
</code></pre>
<pre><code> // touch, mouse implementation code ...
 render() {
    return (&#x3C;Touch>
    {this.renderTouch}
    &#x3C;/Touch>);
 }

 renderTouch = (touch) => (&#x3C;Mouse>
    { (mouse) => &#x3C;Cat mouse={mouse} touch={touch} /> }
    &#x3C;/Mouse>);
</code></pre>
<p>위와 같이 Touch FaCC를 renderTouch arrow function으로 작성하고
Mouse는 arrow function을 직접 내부에 구현하였다. 
둘의 차이점은 Touch, Mouse컴포넌트 둘다 PureComponent일 경우, 
Mouse컴포넌트는 랜더링 될때마다 함수를 매번 생성하여 전달해줄 것이고
renderTouch는 한번만 호출되어 랜더링 될 것이다. 
<a href="https://reactjs.org/docs/render-props.html#be-careful-when-using-render-props-with-reactpurecomponent">PureComponent - Shallow Comparison</a> 
위의 구현으로 HOC의 1,2번 문제가 해결될 수 있음을 확인할 수 있다.</p>
<ul>
<li>props를 직접 전달 받지 않기에 속성이 겹치는 문제가 발생하지 않는다.</li>
<li>props, state, context을 function로 명시적으로 받아 처리하기에 어떤 속성이 어느 컴포넌트에서 넘어왔는지 알기 쉽다.</li>
<li>FaCC로 HOC구현도 쉽게 가능하다.
<pre><code>function withMouse(Component) {
  return class extends React.Component {
    render() {
      return (
        &#x3C;Mouse>
          {(mouse) => &#x3C;Component {...this.props} mouse={mouse} />}
        &#x3C;/Mouse>
      );
    }
  };
}
</code></pre>
</li>
</ul>
<p>그리고 직접적으로 말은 안했지만 Render Prop와 FaCC는 동일한 개념이고 child이냐 render props이냐 차이일뿐 동일하다.</p>
<h3>Problem</h3>
<p><a href="https://reactjs.org/docs/render-props.html#caveats">Render Props Caveats</a> 예시와 동일하게 Mouse에 PureComponent로 했을 경우, 
MouseTracker가 counter를 증가하는 랜더링을 하면 자식 Cat컴포넌트는 다시 랜더링하지 않는다. 
그 이유는 Mouse컴포넌트가 render props으로 bind된 항상 같은 함수를 받아 Mouse 컴포넌트는 랜더링되지 않는다. 
그래서 counter숫자가 증가되지 않는다.</p>
<p><a href="https://codesandbox.io/s/ll2xq45x3q"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit ll2xq45x3q"></a></p>
<p>결국 Render Props나 FaCC를 사용함으로 shouldComponentUpdate로 optimize하기 어려워지는 이슈가 있다.
(render or child로 함수를 넘겨주고 shouldComponentUpdate로 비교하기에)</p>
<h2>Conclusion</h2>
<p>HOC가 만능이 아닌 것처럼 FaCC, HOC를 사용할때 위와 같은 이슈들을 유념하면서 사용하자.
그리고 기존에 존재하는 라이브러리를 한번 참조해보고 사용해보는 것이 좋을거같다.
HOC - <a href="https://github.com/reactjs/react-redux">React Redux(connect)</a>, <a href="https://github.com/ReactTraining/react-router">React Router(withRouter)</a>, <a href="https://github.com/apollographql/react-apollo">Apollo(graphql)</a> 
FaCC, Render Props - <a href="https://github.com/chenglou/react-motion">React Motion</a>, <a href="https://github.com/apollographql/react-apollo">React Apollo(Query tag)</a>, <a href="https://github.com/FormidableLabs/urql">urql(Query tag)</a>, <a href="https://github.com/ReactTraining/react-router">React Router(render props)</a></p>
<h2>Reference</h2>
<p><a href="https://reactjs.org/docs/render-props.html">Render Props</a> 
<a href="https://www.youtube.com/watch?v=BcVAq3YFiuc&#x26;index=2&#x26;list=PLXB3WIVcnsH1TZxTuF6YaiRV0eVWAJhfC&#x26;t=613s">Michael Jackson - Never Write Another HoC</a></p>
</article></div></main><footer class="flex flex-col px-8"><div class="flex flex-col items-start justify-center w-full max-w-2xl mx-auto mb-8"><div class="mb-8 w-full h-[1px] bg-gray-200 dark:bg-gray-800"></div><div class="grid w-full max-w-2xl grid-cols-2 gap-4 pb-16"><div class="flex flex-col items-start space-y-4"><a class="text-gray-500 transition hover:text-gray-600" href="/">Home</a><a class="text-gray-500 transition hover:text-gray-600" href="/about">About</a><a class="text-gray-500 transition hover:text-gray-600" href="/project">Project</a><a class="text-gray-500 transition hover:text-gray-600" href="/blog">Blog</a></div><div class="flex flex-col space-y-4"><a rel="noreferrer" href="https://github.com/BoBeenLee" target="_blank" class="text-gray-500 transition hover:text-gray-600">Github</a><a rel="noreferrer" href="mailto:globaldev@naver.com" target="_blank" class="text-gray-500 transition hover:text-gray-600">Email</a></div></div></div></footer></div><script src="/_next/static/chunks/webpack-43cb8370814af9a9.js" async=""></script><script src="/_next/static/chunks/8866857e-0348eef442260c24.js" async=""></script><script src="/_next/static/chunks/14-47fa5bfc81e5275e.js" async=""></script><script src="/_next/static/chunks/main-app-75fa36f85e585320.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:I{\"id\":\"9129\",\"chunks\":[\"272:webpack-43cb8370814af9a9\",\"680:8866857e-0348eef442260c24\",\"14:14-47fa5bfc81e5275e\"],\"name\":\"\",\"async\":false}\n4:I{\"id\":\"149\",\"chunks\":[\"272:webpack-43cb8370814af9a9\",\"680:8866857e-0348eef442260c24\",\"14:14-47fa5bfc81e5275e\"],\"name\":\"\",\"async\":false}\n5:I{\"id\":\"4503\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"185:app/layout-9383bb0c60f86351\"],\"name\":\"ThemeProvider\",\"async\":false}\n6:I{\"id\":\"6864\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"185:app/layout-9383bb0c60f86351\"],\"name\":\"\",\"async\":f"])</script><script>self.__next_f.push([1,"alse}\n7:I{\"id\":\"935\",\"chunks\":[\"272:webpack-43cb8370814af9a9\",\"680:8866857e-0348eef442260c24\",\"14:14-47fa5bfc81e5275e\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":\"1227\",\"chunks\":[\"272:webpack-43cb8370814af9a9\",\"680:8866857e-0348eef442260c24\",\"14:14-47fa5bfc81e5275e\"],\"name\":\"\",\"async\":false}\n9:I{\"id\":\"5730\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"964:964-fb81438760ba2bf7\",\"880:app/project/page-7f19be5b34bbfb13\"],\"name\":\"\",\"async\":false}\nb:I{\"id\":\"4743\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"185:app/layout-9383bb0c60f8"])</script><script>self.__next_f.push([1,"6351\"],\"name\":\"\",\"async\":false}\nc:I{\"id\":\"9505\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"185:app/layout-9383bb0c60f86351\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"1:[\"$\",\"$L2\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/react-facc-hoc\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"id\",\"react-facc-hoc\",\"d\"],{\"children\":[\"\",{}]}]}]},null,null,true],\"initialHead\":[\"$L3\",null],\"globalErrorComponent\":\"$4\",\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[null,[\"$\",\"body\",null,{\"className\":\"text-white bg-white dark:bg-gray-900 dark:text-black\",\"children\":[[\"$\",\"$L5\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-col flex-1 bg-white dark:bg-gray-900\",\"children\":[[\"$\",\"$L6\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex flex-col justify-center flex-1 px-8 bg-white dark:bg-gray-900\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col items-center w-full max-w-2xl py-12 mx-auto sm:py-20 sm:mb-16\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"font-bold text-3xl md:text-5xl tracking-tight mb-4 text-black dark:text-white\",\"children\":\"Something went Wrong.\"}],[\"$\",\"div\",null,{\"className\":\"mb-8 text-gray-600 dark:text-gray-400\",\"children\":\"I'm guessing you spelled something wrong. Can you double check\\n      that URL?\"}],[\"$\",\"$L9\",null,{\"className\":\"w-64 p-1 mx-auto font-bold text-center text-black bg-gray-200 rounded-md sm:p-4 dark:bg-gray-800 dark:text-white\",\"href\":\"/\",\"children\":\"Home\"}]]}],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"childProp\":{\"current\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"id\",\"react-facc-hoc\",\"d\"],\"children\"],\"hasLoading\":false,\"template\":[\"$\",\"$L8\",null,{}],\"childProp\":{\"current\":[\"$La\",null,null,[]],\"segment\":\"\"}}],\"segment\":[\"id\",\"react-facc-hoc\",\"d\"]}}],\"segment\":\"blog\"}}]}],[\"$\",\"$Lb\",null,{}]]}]}],[\"$\",\"$Lc\",null,{\"async\":true,\"strategy\":\"afterInteractive\",\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-TZZNKPFDD5\"}],[\"$\",\"$Lc\",null,{\"id\":\"gtag\",\"async\":true,\"strategy\":\"afterInteractive\",\"dangerouslySetInnerHTML\":{\"__html\":\"\\nwindow.dataLayer = window.dataLayer || [];\\nfunction gtag(){dataLayer.push(arguments);}\\ngtag('js', new Date());\\n\\ngtag('config', 'G-TZZNKPFDD5');\\n      \"}}]]}]]}],null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/7fc6f9585b0bc593.css\",\"precedence\":\"next.js\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/be7ec14a9e7399cd.css\",\"precedence\":\"next.js\"}]]]}]\n"])</script><script>self.__next_f.push([1,"d:I{\"id\":\"7964\",\"chunks\":[\"730:730-f0f598528cc484dd\",\"964:964-fb81438760ba2bf7\",\"880:app/project/page-7f19be5b34bbfb13\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"a:[\"$\",\"div\",null,{\"className\":\"flex flex-col items-start flex-1 w-full max-w-2xl mx-auto mb-8 border-gray-200 sm:mb-12 dark:border-gray-700\",\"children\":[[\"$\",\"a\",null,{\"className\":\"pb-2 font-bold text-3xl tracking-tigh text-black dark:text-white\",\"children\":\"Function as Child Component And High Order Component\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-row items-center justify-between w-full mt-2\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-row items-center\",\"children\":[[\"$\",\"div\",null,{\"className\":\"w-6 h-6 relative rounded-full overflow-hidden\",\"children\":[\"$\",\"$Ld\",null,{\"alt\":\"avatar\",\"fill\":true,\"src\":\"/assets/quokka.png\",\"priority\":true}]}],[\"$\",\"p\",null,{\"className\":\"ml-2 text-sm text-gray-600 dark:text-gray-400\",\"children\":\"BoBeen Lee\"}]]}],[\"$\",\"p\",null,{\"className\":\"text-sm text-gray-600 dark:text-gray-400\",\"children\":\"March 8, 2018\"}]]}],[\"$\",\"article\",null,{\"className\":\"w-full mt-4 prose dark:prose-dark max-w-none\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cp\u003eHOC는 많은 사람들이 이미 알고 있고 자주 사용하기에 따로 설명은 하지 않겠다. \\n\u003ca href=\\\"https://reactjs.org/docs/higher-order-components.html\\\"\u003e공식문서\u003c/a\u003e에도 자세히 설명 되어있다. \\n주로 보통 HOC는 공통 기능, 횡단 관심사 분리 위해서 사용해왔었다. \\nex) loading, auth, logging, tracking 등등...\u003c/p\u003e\\n\u003cp\u003e\u003ca href=\\\"https://reactjs.org/docs/render-props.html\\\"\u003eRender Props\u003c/a\u003e의 예시를 참조하여 구현해보자.\u003c/p\u003e\\n\u003ch2\u003eHigh Order Component\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode\u003efunction withMouse(Component) {\\n  return class extends React.Component {\\n    constructor(props) {\\n      super(props);\\n      this.handleMouseMove = this.handleMouseMove.bind(this);\\n      this.state = { x: 0, y: 0 };\\n    }\\n\\n    handleMouseMove(event) {\\n      this.setState({\\n        x: event.clientX,\\n        y: event.clientY,\\n      });\\n    }\\n\\n    render() {\\n      return (\\n        \u0026#x3C;div style={{ height: '100%' }} onMouseMove={this.handleMouseMove}\u003e\\n          \u0026#x3C;Component {...this.props} mouse={this.state} /\u003e\\n        \u0026#x3C;/div\u003e\\n      );\\n    }\\n  };\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e만일 \u003ca href=\\\"https://github.com/mridgway/hoist-non-react-statics\\\"\u003eStatic Methods\u003c/a\u003e를 카피하기 위해선 별도의 로직도 필요할 것이다.\u003c/p\u003e\\n\u003ch3\u003eProblem\u003c/h3\u003e\\n\u003col\u003e\\n\u003cli\u003eDuplication Props \\nMouse, Touch기능을 같이 사용하고 싶다면\\n\u003cpre\u003e\u003ccode\u003ewithMouse(withTouch(class extends React.Component { ... }));\\nor\\n@mouse\\n@touch\\nclass Component extends React.Component { ... }\\n\u003c/code\u003e\u003c/pre\u003e\\n로 구현할텐데\\n만일 withTouch와 withMouse 둘다 동일한 mouse props를 넘겨줄 경우, withMouse의 mouse props는 원하는 데로 동작을 안할 것이다.\u003c/li\u003e\\n\u003cli\u003e여러개의 HOC를 사용할 경우 props의 복잡도 증가\\n\u003cpre\u003e\u003ccode\u003ecompose(withMouse, withTouch, withUser, withAuth, withLoading)(...)\\nor\\n@mouse\\n@touch\\n@user\\n@auth\\n@loading\\n...\\n\u003c/code\u003e\u003c/pre\u003e\\n여러개의 HOC를 사용할 경우, 어떤 props가 어떤 HOC에서 넘어왔는지 명시적이지 않아 직접 구현체 HOC props를 확인해야하는 경우가 생기게 된다.\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003ch3\u003eSolution\u003c/h3\u003e\\n\u003cp\u003eFunction as Child Component으로 1, 2의 이슈를 해결할 수 있다.\u003c/p\u003e\\n\u003ch2\u003eFunction as Child Component\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode\u003eclass Mouse extends React.Component {\\n  constructor(props) {\\n    super(props);\\n    this.handleMouseMove = this.handleMouseMove.bind(this);\\n    this.state = { x: 0, y: 0 };\\n  }\\n\\n  handleMouseMove(event) {\\n    this.setState({\\n      x: event.clientX,\\n      y: event.clientY,\\n    });\\n  }\\n\\n  render() {\\n    return (\\n      \u0026#x3C;div style={{ height: '100%' }} onMouseMove={this.handleMouseMove}\u003e\\n        {this.props.children(this.state)}\\n      \u0026#x3C;/div\u003e\\n    );\\n  }\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cpre\u003e\u003ccode\u003e // touch, mouse implementation code ...\\n render() {\\n    return (\u0026#x3C;Touch\u003e\\n    {this.renderTouch}\\n    \u0026#x3C;/Touch\u003e);\\n }\\n\\n renderTouch = (touch) =\u003e (\u0026#x3C;Mouse\u003e\\n    { (mouse) =\u003e \u0026#x3C;Cat mouse={mouse} touch={touch} /\u003e }\\n    \u0026#x3C;/Mouse\u003e);\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e위와 같이 Touch FaCC를 renderTouch arrow function으로 작성하고\\nMouse는 arrow function을 직접 내부에 구현하였다. \\n둘의 차이점은 Touch, Mouse컴포넌트 둘다 PureComponent일 경우, \\nMouse컴포넌트는 랜더링 될때마다 함수를 매번 생성하여 전달해줄 것이고\\nrenderTouch는 한번만 호출되어 랜더링 될 것이다. \\n\u003ca href=\\\"https://reactjs.org/docs/render-props.html#be-careful-when-using-render-props-with-reactpurecomponent\\\"\u003ePureComponent - Shallow Comparison\u003c/a\u003e \\n위의 구현으로 HOC의 1,2번 문제가 해결될 수 있음을 확인할 수 있다.\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003eprops를 직접 전달 받지 않기에 속성이 겹치는 문제가 발생하지 않는다.\u003c/li\u003e\\n\u003cli\u003eprops, state, context을 function로 명시적으로 받아 처리하기에 어떤 속성이 어느 컴포넌트에서 넘어왔는지 알기 쉽다.\u003c/li\u003e\\n\u003cli\u003eFaCC로 HOC구현도 쉽게 가능하다.\\n\u003cpre\u003e\u003ccode\u003efunction withMouse(Component) {\\n  return class extends React.Component {\\n    render() {\\n      return (\\n        \u0026#x3C;Mouse\u003e\\n          {(mouse) =\u003e \u0026#x3C;Component {...this.props} mouse={mouse} /\u003e}\\n        \u0026#x3C;/Mouse\u003e\\n      );\\n    }\\n  };\\n}\\n\u003c/code\u003e\u003c/pre\u003e\\n\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cp\u003e그리고 직접적으로 말은 안했지만 Render Prop와 FaCC는 동일한 개념이고 child이냐 render props이냐 차이일뿐 동일하다.\u003c/p\u003e\\n\u003ch3\u003eProblem\u003c/h3\u003e\\n\u003cp\u003e\u003ca href=\\\"https://reactjs.org/docs/render-props.html#caveats\\\"\u003eRender Props Caveats\u003c/a\u003e 예시와 동일하게 Mouse에 PureComponent로 했을 경우, \\nMouseTracker가 counter를 증가하는 랜더링을 하면 자식 Cat컴포넌트는 다시 랜더링하지 않는다. \\n그 이유는 Mouse컴포넌트가 render props으로 bind된 항상 같은 함수를 받아 Mouse 컴포넌트는 랜더링되지 않는다. \\n그래서 counter숫자가 증가되지 않는다.\u003c/p\u003e\\n\u003cp\u003e\u003ca href=\\\"https://codesandbox.io/s/ll2xq45x3q\\\"\u003e\u003cimg src=\\\"https://codesandbox.io/static/img/play-codesandbox.svg\\\" alt=\\\"Edit ll2xq45x3q\\\"\u003e\u003c/a\u003e\u003c/p\u003e\\n\u003cp\u003e결국 Render Props나 FaCC를 사용함으로 shouldComponentUpdate로 optimize하기 어려워지는 이슈가 있다.\\n(render or child로 함수를 넘겨주고 shouldComponentUpdate로 비교하기에)\u003c/p\u003e\\n\u003ch2\u003eConclusion\u003c/h2\u003e\\n\u003cp\u003eHOC가 만능이 아닌 것처럼 FaCC, HOC를 사용할때 위와 같은 이슈들을 유념하면서 사용하자.\\n그리고 기존에 존재하는 라이브러리를 한번 참조해보고 사용해보는 것이 좋을거같다.\\nHOC - \u003ca href=\\\"https://github.com/reactjs/react-redux\\\"\u003eReact Redux(connect)\u003c/a\u003e, \u003ca href=\\\"https://github.com/ReactTraining/react-router\\\"\u003eReact Router(withRouter)\u003c/a\u003e, \u003ca href=\\\"https://github.com/apollographql/react-apollo\\\"\u003eApollo(graphql)\u003c/a\u003e \\nFaCC, Render Props - \u003ca href=\\\"https://github.com/chenglou/react-motion\\\"\u003eReact Motion\u003c/a\u003e, \u003ca href=\\\"https://github.com/apollographql/react-apollo\\\"\u003eReact Apollo(Query tag)\u003c/a\u003e, \u003ca href=\\\"https://github.com/FormidableLabs/urql\\\"\u003eurql(Query tag)\u003c/a\u003e, \u003ca href=\\\"https://github.com/ReactTraining/react-router\\\"\u003eReact Router(render props)\u003c/a\u003e\u003c/p\u003e\\n\u003ch2\u003eReference\u003c/h2\u003e\\n\u003cp\u003e\u003ca href=\\\"https://reactjs.org/docs/render-props.html\\\"\u003eRender Props\u003c/a\u003e \\n\u003ca href=\\\"https://www.youtube.com/watch?v=BcVAq3YFiuc\u0026#x26;index=2\u0026#x26;list=PLXB3WIVcnsH1TZxTuF6YaiRV0eVWAJhfC\u0026#x26;t=613s\\\"\u003eMichael Jackson - Never Write Another HoC\u003c/a\u003e\u003c/p\u003e\\n\"}}]]}]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"BoBeen Lee\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"Front-end developer, TypeScript enthusiast\"}],null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"keywords\",\"content\":\"BoBeen Lee, React, React Native, Typescript, Javascript\"}],null,[[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#111827\"}]],null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1, shrink-to-fit=no\"}],null,null,[\"$\",\"meta\",null,{\"name\":\"robots\",\"content\":\"follow, index\"}],null,null,null,null,null,null,null,[]],[[\"$\",\"link\",null,{\"rel\":\"canonical\",\"href\":\"https://bbl-nx.vercel.app/\"}],null,null,null],null,null,[null,null,null,null,null],null,[null,[\"$\",\"meta\",null,{\"property\":\"og:title\",\"content\":\"BoBeen Lee\"}],[\"$\",\"meta\",null,{\"property\":\"og:description\",\"content\":\"Front-end developer, TypeScript enthusiast\"}],[\"$\",\"meta\",null,{\"property\":\"og:url\",\"content\":\"https://bbl-nx.vercel.app/\"}],[\"$\",\"meta\",null,{\"property\":\"og:site_name\",\"content\":\"BoBeen Lee\"}],null,null,null,[[[\"$\",\"meta\",null,{\"property\":\"og:image\",\"content\":\"https://bbl-nx.vercel.app/assets/quokka.webp\"}]]],null,null,null,null,null,null,[\"$\",\"meta\",null,{\"property\":\"og:type\",\"content\":\"website\"}]],[[\"$\",\"meta\",null,{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:site\",\"content\":\"@BoBeenLee\"}],null,[\"$\",\"meta\",null,{\"name\":\"twitter:creator\",\"content\":\"@BoBeenLee\"}],null,[\"$\",\"meta\",null,{\"name\":\"twitter:title\",\"content\":\"BoBeen Lee\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:description\",\"content\":\"Front-end developer, TypeScript enthusiast\"}],[[[\"$\",\"meta\",null,{\"name\":\"twitter:image\",\"content\":\"https://bbl-nx.vercel.app/assets/quokka.webp\"}],null]],null,null],null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/favicon.ico\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/apple-icon-180x180.png\",\"sizes\":\"180x180\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/favicon-32x32.png\",\"type\":\"image/png\",\"sizes\":\"32x32\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/favicon-16x16.png\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicons/manifest.json\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/static/favicons/favicon.svg\"}]],[],null]]\n"])</script>